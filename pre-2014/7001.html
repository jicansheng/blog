
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<html>

<head>
<title>24点</title>
<style type="text/css">
pre {
 white-space: pre-wrap;       /* css-3 */
 white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
 white-space: -pre-wrap;      /* Opera 4-6 */
 white-space: -o-pre-wrap;    /* Opera 7 */
 word-wrap: break-word;       /* Internet Explorer 5.5+ */
}
</style>
</head>
<body>
<font size="5">24点</font>
<br>

<font size="2">2009-10-05 18:56:23</font>
<p>
<pre>
无聊，忽然想起JQ说过24点的算法，想起大一时傻傻的一堆IF，于是决定重写一遍(用逆波兰表达式计算，避免使用括号的麻烦）：<br>
<pre>
<font color="#444444">#!/usr/bin/python</font>

<font color="#444444"># Usage:   python twenty-four-point.py num1 num2 num3 num4</font>
<font color="#444444"># Exampel: python twenty-four-point.py 3 3 8 8</font>
<strong>import</strong> <font color="#2040a0">sys</font>

<font color="#2040a0">array</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="4444FF">]</font>
<strong>for</strong> <font color="#2040a0">i</font> <strong>in</strong> <font color="#2040a0">range</font><font color="4444FF">(</font><font color="#FF0000">1</font>,<font color="#FF0000">5</font><font color="4444FF">)</font><font color="4444FF">:</font>
    <font color="#2040a0">array</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="#2040a0">float</font><font color="4444FF">(</font><font color="#2040a0">sys</font>.<font color="#2040a0">argv</font><font color="4444FF">[</font><font color="#2040a0">i</font><font color="4444FF">]</font><font color="4444FF">)</font><font color="4444FF">)</font>
<font color="#2040a0">floatArray</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="4444FF">]</font>
<font color="#2040a0">temp</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="#FF0000">0</font>,<font color="#FF0000">0</font>,<font color="#FF0000">0</font>,<font color="#FF0000">0</font><font color="4444FF">]</font>
<font color="#2040a0">temp2</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="#FF0000">0</font>,<font color="#FF0000">0</font>,<font color="#FF0000">0</font>,<font color="#FF0000">0</font><font color="4444FF">]</font>
<font color="#2040a0">def</font> <font color="#2040a0">produceArray</font><font color="4444FF">(</font><font color="#2040a0">i</font><font color="4444FF">)</font><font color="4444FF">:</font>
    <strong>if</strong> <font color="#2040a0">i</font><font color="4444FF">=</font><font color="4444FF">=</font><font color="#FF0000">4</font><font color="4444FF">:</font> 
        <font color="#2040a0">numArray</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="#2040a0">array</font><font color="4444FF">[</font><font color="#2040a0">temp</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font><font color="4444FF">]</font>, <font color="#2040a0">array</font><font color="4444FF">[</font><font color="#2040a0">temp</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font><font color="4444FF">]</font>,
                    <font color="#2040a0">array</font><font color="4444FF">[</font><font color="#2040a0">temp</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font>, <font color="#2040a0">array</font><font color="4444FF">[</font><font color="#2040a0">temp</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">]</font>
        <strong>if</strong> <font color="#2040a0">numArray</font> <strong>not</strong> <strong>in</strong> <font color="#2040a0">floatArray</font><font color="4444FF">:</font> <font color="#2040a0">floatArray</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="#2040a0">numArray</font><font color="4444FF">)</font>
    <strong>else</strong><font color="4444FF">:</font>
        <strong>for</strong> <font color="#2040a0">j</font> <strong>in</strong> <font color="#2040a0">range</font><font color="4444FF">(</font><font color="#FF0000">4</font><font color="4444FF">)</font><font color="4444FF">:</font>
            <strong>if</strong> <font color="#2040a0">temp2</font><font color="4444FF">[</font><font color="#2040a0">j</font><font color="4444FF">]</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#FF0000">0</font><font color="4444FF">:</font>
                <font color="#2040a0">temp</font><font color="4444FF">[</font><font color="#2040a0">i</font><font color="4444FF">]</font> <font color="4444FF">=</font> <font color="#2040a0">j</font>
                <font color="#2040a0">temp2</font><font color="4444FF">[</font><font color="#2040a0">j</font><font color="4444FF">]</font> <font color="4444FF">=</font> <font color="#FF0000">1</font>
                <font color="#2040a0">produceArray</font><font color="4444FF">(</font><font color="#2040a0">i</font><font color="4444FF">+</font><font color="#FF0000">1</font><font color="4444FF">)</font>
                <font color="#2040a0">temp2</font><font color="4444FF">[</font><font color="#2040a0">j</font><font color="4444FF">]</font> <font color="4444FF">=</font> <font color="#FF0000">0</font>
<font color="#2040a0">produceArray</font><font color="4444FF">(</font><font color="#FF0000">0</font><font color="4444FF">)</font>

<font color="#2040a0">operator</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="#008000">'+'</font>, <font color="#008000">'-'</font>, <font color="#008000">'*'</font>, <font color="#008000">'/'</font><font color="4444FF">]</font>
<font color="#2040a0">operatorArray</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="4444FF">]</font>

<strong>for</strong> <font color="#2040a0">op1</font> <strong>in</strong> <font color="#2040a0">operator</font><font color="4444FF">:</font>
    <strong>for</strong> <font color="#2040a0">op2</font> <strong>in</strong> <font color="#2040a0">operator</font><font color="4444FF">:</font>
        <strong>for</strong> <font color="#2040a0">op3</font> <strong>in</strong> <font color="#2040a0">operator</font><font color="4444FF">:</font>
            <font color="#2040a0">operatorArray</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font><font color="#2040a0">op1</font>,<font color="#2040a0">op2</font>,<font color="#2040a0">op3</font><font color="4444FF">]</font><font color="4444FF">)</font>

<font color="#2040a0">expressions</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="4444FF">]</font>
<font color="#2040a0">def</font> <font color="#2040a0">produceExpression</font><font color="4444FF">(</font><font color="4444FF">)</font><font color="4444FF">:</font>
    <strong>for</strong> <font color="#2040a0">num</font> <strong>in</strong> <font color="#2040a0">floatArray</font><font color="4444FF">:</font>
        <strong>for</strong> <font color="#2040a0">ops</font> <strong>in</strong> <font color="#2040a0">operatorArray</font><font color="4444FF">:</font>
            <font color="#2040a0">expressions</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font>
                <font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">)</font>
            <font color="#2040a0">expressions</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font>
                <font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">)</font>
            <font color="#2040a0">expressions</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font>
                <font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">)</font>
            <font color="#2040a0">expressions</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font>
                <font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">)</font>
            <font color="#2040a0">expressions</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="4444FF">[</font>
                <font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font>,<font color="#2040a0">num</font><font color="4444FF">[</font><font color="#FF0000">3</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">0</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">1</font><font color="4444FF">]</font>,<font color="#2040a0">ops</font><font color="4444FF">[</font><font color="#FF0000">2</font><font color="4444FF">]</font><font color="4444FF">]</font><font color="4444FF">)</font>

<font color="#2040a0">def</font> <font color="#2040a0">calc</font><font color="4444FF">(</font><font color="#2040a0">array</font><font color="4444FF">)</font><font color="4444FF">:</font>
    <font color="#2040a0">stack</font> <font color="4444FF">=</font> <font color="4444FF">[</font><font color="4444FF">]</font>
    <strong>for</strong> <font color="#2040a0">item</font> <strong>in</strong> <font color="#2040a0">array</font><font color="4444FF">:</font>
        <strong>if</strong> <font color="#2040a0">item</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#008000">'+'</font> <strong>or</strong> <font color="#2040a0">item</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#008000">'-'</font> <strong>or</strong> <font color="#2040a0">item</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#008000">'*'</font> <strong>or</strong> <font color="#2040a0">item</font> <font color="4444FF">=</font><font color="4444FF">=</font> <font color="#008000">'/'</font><font color="4444FF">:</font>
            <font color="#2040a0">y</font> <font color="4444FF">=</font> <font color="#2040a0">stack</font>.<font color="#2040a0">pop</font><font color="4444FF">(</font><font color="4444FF">)</font>
            <font color="#2040a0">x</font> <font color="4444FF">=</font> <font color="#2040a0">stack</font>.<font color="#2040a0">pop</font><font color="4444FF">(</font><font color="4444FF">)</font>
            <font color="#2040a0">z</font> <font color="4444FF">=</font> <font color="#2040a0">eval</font><font color="4444FF">(</font><font color="#2040a0">str</font><font color="4444FF">(</font><font color="#2040a0">x</font><font color="4444FF">)</font> <font color="4444FF">+</font> <font color="#2040a0">item</font> <font color="4444FF">+</font> <font color="#2040a0">str</font><font color="4444FF">(</font><font color="#2040a0">y</font><font color="4444FF">)</font><font color="4444FF">)</font>
            <font color="#2040a0">stack</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="#2040a0">z</font><font color="4444FF">)</font>
        <strong>else</strong><font color="4444FF">:</font>
            <font color="#2040a0">stack</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="#2040a0">item</font><font color="4444FF">)</font>
    <strong>return</strong> <font color="#2040a0">stack</font>.<font color="#2040a0">pop</font><font color="4444FF">(</font><font color="4444FF">)</font>

<font color="#2040a0">array</font>.<font color="#2040a0">append</font><font color="4444FF">(</font><font color="#008000">'/'</font><font color="4444FF">)</font>

<font color="#2040a0">produceExpression</font><font color="4444FF">(</font><font color="4444FF">)</font>
<strong>for</strong> <font color="#2040a0">expr</font> <strong>in</strong> <font color="#2040a0">expressions</font><font color="4444FF">:</font>
    <strong>try</strong><font color="4444FF">:</font>
        <strong>if</strong> <font color="#FF0000">23.9999</font> <font color="4444FF"><</font> <font color="#2040a0">calc</font><font color="4444FF">(</font><font color="#2040a0">expr</font><font color="4444FF">)</font> <font color="4444FF"><</font> <font color="#FF0000">24.0001</font><font color="4444FF">:</font>
            <strong>print</strong> <font color="#2040a0">expr</font>
    <strong>except</strong> <font color="#2040a0">ZeroDivisionError</font><font color="4444FF">:</font>
        <strong>pass</strong>


</pre>
<hr>
syntax highlighted by <a href="http://www.palfrader.org/code2html">Code2HTML</a>, v. 0.9.1
</pre>
