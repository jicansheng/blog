
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<html>

<head>
<title>innerHTML</title>
<style type="text/css">
pre {
 white-space: pre-wrap;       /* css-3 */
 white-space: -moz-pre-wrap;  /* Mozilla, since 1999 */
 white-space: -pre-wrap;      /* Opera 4-6 */
 white-space: -o-pre-wrap;    /* Opera 7 */
 word-wrap: break-word;       /* Internet Explorer 5.5+ */
}
</style>
</head>
<body>
<font size="5">innerHTML</font>
<br>

<font size="2">2008-01-12 17:00:43</font>
<p>
<pre>
<pre>
前几天写一个AJAX的应用，要把搜索得到的物品添加到下载列表里，然后一次性下载。由于我搜索的结果是以表格的形式显示的，所以我一开始就给每个&lt;tr>一个ID，然后往下载列表里添加一行（insertRow),然后把被添加的&lt;tr>的innerHTML赋值给新添加到&lt;tr>的innerHTML。因为每一行都有多列，其中有checkbox显然不应该用相同的名字、ID，所有还要 document.getElementByID()，在改name和ID。

在Firefox下，一切运行良好，1000多行的添加也很快，感觉不到1秒。后来在IE下测试了一下，根本没反应，光说有内部错误，显示出错的位置在900多行，但看了页面的源代码，才300多行。faint。。。

我是看着w3cschools做到，上面写着，虽然innerHTML不是w3c标准，但IE、Firefox、Opera的较新的版本都能支持。我很诧异，已经是IE7了还不行。后来看到网上有人也遇到这个问题，说只要innerHTML里有&lt;td>，IE就不支持了。。。。好废啊。。。。

只能重新修改页面的逻辑，因为得insertRow，在insertCell。问题是一行又好多列，还得一个cell一个cell大赋值，为了避免每个cell都必须document.getElementById()才能得到原来的值，我把所有的数据都储存在数组里。

第一次写这么长的javascript代码，写得我都快晕掉了，终于写好了。测试了一下，firefox下的运行效率明显降低了，IE特慢，IE在复制1465多行花了10多秒，复制到时候，整个浏览器都动不了了。

最后测试了下Opera，好快啊。而且可以看到一行一行是怎么被逐渐加上去的。Firefox、IE都是卡在那里，直到好了才一块显示。
</pre>
</pre>
